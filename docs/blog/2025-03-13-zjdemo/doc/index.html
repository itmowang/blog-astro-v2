<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Astro v4.7.1"><!-- <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" /> --><!-- Canonical URL --><link rel="canonical" href="https://blog.loli.wang/blog/2025-03-13-zjdemo/doc/"><!-- Primary Meta Tags --><title>最近写流程图和流程设计器的初始化demo - 魔王の博客 </title><meta name="title" content="最近写流程图和流程设计器的初始化demo - 魔王の博客"><meta name="description" content="高兴的使用astro构建"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://blog.loli.wang/blog/2025-03-13-zjdemo/doc/"><meta property="og:title" content="最近写流程图和流程设计器的初始化demo - 魔王の博客"><meta property="og:description" content="高兴的使用astro构建"><meta property="og:image" content="https://blog.loli.wang/placeholder-social.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://blog.loli.wang/blog/2025-03-13-zjdemo/doc/"><meta property="twitter:title" content="最近写流程图和流程设计器的初始化demo - 魔王の博客"><meta property="twitter:description" content="高兴的使用astro构建"><meta property="twitter:image" content="https://blog.loli.wang/placeholder-social.jpg"><link rel="stylesheet" href="/_astro/hoisted.DH1pNdf-.css">
<link rel="stylesheet" href="/_astro/about.CrVYBgZN.css"><script type="module" src="/_astro/hoisted.CGSjG33K.js"></script></head> <body>  <div id="app" class="main"> <div class="sidebar"> <div class="top-container" data-aos="fade-right"> <div class="top-header-container"> <a href="https://blog.loli.wang/" title="Mowang - Your bio" class="site-title-container"><img src="https://avatars.githubusercontent.com/u/137391282?v=4" alt="Mowang" class="site-logo"> <h1 class="site-title">魔王の博客</h1></a> <div class="menu-btn"> <div class="line"></div> </div> </div> <div> <a href="/" title="Blog" class="site-nav"> Blog </a><a href="/life" title="Life" class="site-nav"> Life </a><a href="/archive" title="Archive" class="site-nav"> Archive </a><a href="/link" title="Link" class="site-nav"> Link </a><a href="/about" title="About" class="site-nav"> About </a><a href="https://github.com/itmowang" title="Github" class="site-nav"> Github </a> </div> </div> <div class="bottom-container" data-aos="flip-up" data-aos-offset="0"> <div class="social-container"></div> <div class="site-description">高兴的使用astro构建</div> <div class="site-footer"> © 2026 YOUR NAME HERE. | <a href="https://blog.loli.wang/rss.xml" title="RSS" target="_blank" class="rss">RSS</a> </div> </div> </div>  <div class="main-container"> <div class="content-container" data-aos="fade-up">  <div class="post-detail" id="lightgallery"> <h2 class="post-title">最近写流程图和流程设计器的初始化demo</h2> <div class="post-date"> <time datetime="2025-03-13T15:27:24.000Z">2025-03-13 23:27</time> </div> <div class="post-share"> <div class="postShare"> <div> <div class="postShare-List">
分享本文 :
<a href="http://service.weibo.com/share/share.php?url=https://blog.loli.wang/blog/2025-03-13-zjdemo/doc/&title=undefined - 魔王の博客&pic=http://img.blog.loli.wang/2025-03-13-zjdemo/02.png" target="_blank"> <i class="iconfont icon-xinlang" style="color:#ff763b"></i></a> <div class="wechat-container"> <a href="#"> <i id="wechatIcon" class="iconfont icon-weichat" style="color:#33b045"></i></a> <div class="wechat-dropdown" id="wechatDropdown"> <p>分享到微信</p> <div id="qrcode"></div> <p>扫描二维码</p> <p>可在微信查看或分享至朋友圈。</p> </div> </div> <a href="https://connect.qq.com/widget/shareqq/index.html?url=https://blog.loli.wang/blog/2025-03-13-zjdemo/doc/&title=undefined - 魔王の博客&source=undefined - 魔王の博客&desc=高兴的使用astro构建&pics=http://img.blog.loli.wang/2025-03-13-zjdemo/02.png" target="_blank"> <i class="iconfont icon-QQ" style="color:#56b6e7"></i></a> <a href="" target="_blank"> <i class="iconfont icon-facebook" style="color:#44619D"></i></a> <a href="" target="_blank"> <i class="iconfont icon-fenxiang1" style="color:#33b045"></i></a> </div> </div> </div>  </div> <div class="feature-container" style="background-image: url('http://img.blog.loli.wang/2025-03-13-zjdemo/02.png');"></div> <div class="post-content">  <h2 id="这个月不知道发生了什么">这个月不知道发生了什么。</h2>
<p>这个月不知道发生了什么，多出来几个图表的功能，图表还是不是简单的展示图表，令人纠结，为了防止以后 无法回忆起当时做了什么，记录写个demo</p>
<h2 id="1流程图-antv-x6">1.流程图 Antv X6</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> React, { useEffect, useRef, useState } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "react"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Graph, Shape } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "@antv/x6"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> dagre </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "dagre"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { fetch } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@/api/order'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "./workMap.scss"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { useQuery } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "@tanstack/react-query"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { message } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "antd"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> NODE_WIDTH</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 160</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> NODE_HEIGHT</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 80</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> colorMap</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#9ECBFF">    "SO No."</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#E1E4E8">        textColor: </span><span style="color:#9ECBFF">"#FAD27B"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        bgColor: </span><span style="color:#9ECBFF">"#FAD27B"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#9ECBFF">    "Schedule No."</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#E1E4E8">        textColor: </span><span style="color:#9ECBFF">"#AAD09D"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        bgColor: </span><span style="color:#9ECBFF">"#AAD09D"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#9ECBFF">    "Task No."</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#E1E4E8">        textColor: </span><span style="color:#9ECBFF">"#89CCD5"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        bgColor: </span><span style="color:#9ECBFF">"#89CCD5"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#9ECBFF">    "Operation No."</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#E1E4E8">        textColor: </span><span style="color:#9ECBFF">"#8382BE"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        bgColor: </span><span style="color:#9ECBFF">"#8382BE"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#9ECBFF">    "Purchase No."</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#E1E4E8">        textColor: </span><span style="color:#9ECBFF">"#FA7B7B"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        bgColor: </span><span style="color:#9ECBFF">"#FA7B7B"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#9ECBFF">    "Billing No."</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#E1E4E8">        textColor: </span><span style="color:#9ECBFF">"#DC7DB0"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        bgColor: </span><span style="color:#9ECBFF">"#DC7DB0"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">} </span><span style="color:#F97583">as</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//  TO : Ocean TA: Air  TT :Trucking TC: Customs TW: Warehouse TE： Express TB: Billing</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> taskTitleMatch</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">type</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">label</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (type </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> "Task No."</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">        // 运输方式映射表</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> transportMap</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">            TO: </span><span style="color:#9ECBFF">'Ocean'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            TA: </span><span style="color:#9ECBFF">'Air'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            TT: </span><span style="color:#9ECBFF">'Trucking'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            TC: </span><span style="color:#9ECBFF">'Customs'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            TW: </span><span style="color:#9ECBFF">'Warehouse'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            TE: </span><span style="color:#9ECBFF">'Express'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            TB: </span><span style="color:#9ECBFF">'Billing'</span></span>
<span class="line"><span style="color:#E1E4E8">        } </span><span style="color:#F97583">as</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#6A737D">        // 提取label前2个字符作为运输方式代码</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> transportCode</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> label.</span><span style="color:#B392F0">slice</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#6A737D">        // 返回匹配的运输方式全称，若无则返回原始label</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#9ECBFF"> `${</span><span style="color:#E1E4E8">transportMap</span><span style="color:#9ECBFF">[</span><span style="color:#E1E4E8">transportCode</span><span style="color:#9ECBFF">]</span><span style="color:#9ECBFF">} ${</span><span style="color:#E1E4E8">type</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8"> ;</span></span>
<span class="line"><span style="color:#E1E4E8">    } </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> type</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">Shape.</span><span style="color:#79B8FF">HTML</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">register</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">    shape: </span><span style="color:#9ECBFF">"custom-html"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    width: </span><span style="color:#79B8FF">NODE_WIDTH</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    height: </span><span style="color:#79B8FF">NODE_HEIGHT</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">    html</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">node</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> div</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> document.</span><span style="color:#B392F0">createElement</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"div"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">        div.className </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "custom-html"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">label</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">type</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> node.data;</span></span>
<span class="line"><span style="color:#6A737D">        // 根据 type 获取颜色配置，如果没有则使用默认颜色</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">textColor</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">bgColor</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> colorMap[type]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">        div.innerHTML </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> `&#x3C;div class="content" style=" background-color: ${</span><span style="color:#E1E4E8">bgColor</span><span style="color:#9ECBFF">}; border: 1px solid ${</span><span style="color:#E1E4E8">bgColor</span><span style="color:#9ECBFF">};"></span></span>
<span class="line"><span style="color:#9ECBFF">        &#x3C;div class="labelBox"></span></span>
<span class="line"><span style="color:#9ECBFF">            &#x3C;div>${</span><span style="color:#B392F0">taskTitleMatch</span><span style="color:#9ECBFF">(</span><span style="color:#E1E4E8">type</span><span style="color:#9ECBFF">, </span><span style="color:#E1E4E8">label</span><span style="color:#9ECBFF">)</span><span style="color:#9ECBFF">}&#x3C;/div></span></span>
<span class="line"><span style="color:#9ECBFF">        &#x3C;div></span></span>
<span class="line"><span style="color:#9ECBFF">        &#x3C;div class="textBox" style="color:#000"></span></span>
<span class="line"><span style="color:#9ECBFF">            &#x3C;div>${</span><span style="color:#E1E4E8">label</span><span style="color:#9ECBFF">}&#x3C;/div></span></span>
<span class="line"><span style="color:#9ECBFF">        &#x3C;div></span></span>
<span class="line"><span style="color:#9ECBFF">    &#x3C;/div>`</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> div;</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> IProps</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">    type</span><span style="color:#F97583">:</span><span style="color:#9ECBFF"> 'so'</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> 'po'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">    orderNo</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> OrgChartGraph</span><span style="color:#F97583">:</span><span style="color:#B392F0"> React</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">FC</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">IProps</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ({ </span><span style="color:#FFAB70">type</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">orderNo</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> containerRef</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> useRef</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">HTMLDivElement</span><span style="color:#E1E4E8">>(</span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">nodes</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setNodes</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#E1E4E8">[]>([]);</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">edges</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setEdges</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#E1E4E8">[]>([]);</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">data</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setData</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#E1E4E8">[]>([]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">refetch</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">isLoading</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useQuery</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#E1E4E8">        [</span><span style="color:#9ECBFF">'fetch'</span><span style="color:#E1E4E8">],</span></span>
<span class="line"><span style="color:#E1E4E8">        () </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#B392F0">            fetch</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">                orderNo</span></span>
<span class="line"><span style="color:#E1E4E8">            }),</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            enabled: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">            onSuccess</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">data</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">                if</span><span style="color:#E1E4E8"> (data.code </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 200</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">                    const</span><span style="color:#79B8FF"> source</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> data.data;</span></span>
<span class="line"><span style="color:#B392F0">                    setData</span><span style="color:#E1E4E8">(source)</span></span>
<span class="line"><span style="color:#F97583">                    const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">nodes</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">edges</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#B392F0"> transformData</span><span style="color:#E1E4E8">(source);</span></span>
<span class="line"><span style="color:#B392F0">                    setNodes</span><span style="color:#E1E4E8">(nodes)</span></span>
<span class="line"><span style="color:#B392F0">                    setEdges</span><span style="color:#E1E4E8">(edges)</span></span>
<span class="line"><span style="color:#E1E4E8">                } </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">                    message.</span><span style="color:#B392F0">error</span><span style="color:#E1E4E8">(data.message)</span></span>
<span class="line"><span style="color:#E1E4E8">                }</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    function</span><span style="color:#B392F0"> transformData</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">data</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">[]) {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> nodes</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [] </span><span style="color:#F97583">as</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">[];</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> edges</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [] </span><span style="color:#F97583">as</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">[];</span></span>
<span class="line"><span style="color:#F97583">        function</span><span style="color:#B392F0"> traverse</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">node</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">orderNo</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">; </span><span style="color:#FFAB70">type</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">; </span><span style="color:#FFAB70">createUser</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">; </span><span style="color:#FFAB70">child</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">[]; }, </span><span style="color:#FFAB70">parent</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">orderNo</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">; } </span><span style="color:#F97583">|</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">            // 将当前节点添加到 nodes 中</span></span>
<span class="line"><span style="color:#E1E4E8">            nodes.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">                id: node.orderNo,       </span><span style="color:#6A737D">// 使用 orderNo 作为节点 id</span></span>
<span class="line"><span style="color:#E1E4E8">                label: node.orderNo,    </span><span style="color:#6A737D">// label 可按需求修改，比如显示 orderNo</span></span>
<span class="line"><span style="color:#E1E4E8">                type: node.type,        </span><span style="color:#6A737D">// 用于后续 colorMap 的映射</span></span>
<span class="line"><span style="color:#E1E4E8">                createUser: node.createUser,</span></span>
<span class="line"><span style="color:#E1E4E8">            });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">            // 如果存在父节点，则生成一条边，从父节点指向当前节点</span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> (parent) {</span></span>
<span class="line"><span style="color:#E1E4E8">                edges.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">                    source: parent.orderNo,</span></span>
<span class="line"><span style="color:#E1E4E8">                    target: node.orderNo,</span></span>
<span class="line"><span style="color:#E1E4E8">                });</span></span>
<span class="line"><span style="color:#E1E4E8">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">            // 递归处理子节点</span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> (node.child </span><span style="color:#F97583">&#x26;&#x26;</span><span style="color:#E1E4E8"> node.child.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> ></span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">                node.child.</span><span style="color:#B392F0">forEach</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">child</span><span style="color:#F97583"> =></span><span style="color:#B392F0"> traverse</span><span style="color:#E1E4E8">(child, node));</span></span>
<span class="line"><span style="color:#E1E4E8">            }</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        // 处理根节点（注意接口返回的数据为数组）</span></span>
<span class="line"><span style="color:#E1E4E8">        data.</span><span style="color:#B392F0">forEach</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">rootNode</span><span style="color:#F97583"> =></span><span style="color:#B392F0"> traverse</span><span style="color:#E1E4E8">(rootNode, </span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> { nodes, edges };</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    useEffect</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">        refetch</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">    }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    useEffect</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> graph</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Graph</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">            container: containerRef.current</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            interacting: {</span></span>
<span class="line"><span style="color:#E1E4E8">                nodeMovable: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// 禁止节点拖动</span></span>
<span class="line"><span style="color:#E1E4E8">                edgeMovable: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// 禁止连线拖动</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">            panning: {</span></span>
<span class="line"><span style="color:#E1E4E8">                enabled: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">            mousewheel: {</span></span>
<span class="line"><span style="color:#E1E4E8">                enabled: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                modifiers: [</span><span style="color:#9ECBFF">'ctrl'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'meta'</span><span style="color:#E1E4E8">],</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">        });</span></span>
<span class="line"><span style="color:#E1E4E8">        </span></span>
<span class="line"><span style="color:#E1E4E8">        nodes.</span><span style="color:#B392F0">forEach</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">node</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">            graph.</span><span style="color:#B392F0">addNode</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">                id: node.id,</span></span>
<span class="line"><span style="color:#E1E4E8">                shape: </span><span style="color:#9ECBFF">"custom-html"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                width: </span><span style="color:#79B8FF">NODE_WIDTH</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                height: </span><span style="color:#79B8FF">NODE_HEIGHT</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                data: node,</span></span>
<span class="line"><span style="color:#E1E4E8">            });</span></span>
<span class="line"><span style="color:#E1E4E8">        });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        // 创建边</span></span>
<span class="line"><span style="color:#E1E4E8">        edges.</span><span style="color:#B392F0">forEach</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">edge</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">            graph.</span><span style="color:#B392F0">addEdge</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">                source: edge.source,</span></span>
<span class="line"><span style="color:#E1E4E8">                target: edge.target,</span></span>
<span class="line"><span style="color:#E1E4E8">                attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    line: {</span></span>
<span class="line"><span style="color:#E1E4E8">                        strokeWidth: </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        stroke: </span><span style="color:#9ECBFF">"#A2B1C3"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        sourceMarker: </span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        targetMarker: </span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    },</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">            });</span></span>
<span class="line"><span style="color:#E1E4E8">        });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        // 自定义布局函数</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#B392F0"> layoutGraph</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">            const</span><span style="color:#79B8FF"> dir</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "LR"</span><span style="color:#F97583"> as</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">            const</span><span style="color:#79B8FF"> g</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#E1E4E8"> dagre.graphlib.</span><span style="color:#B392F0">Graph</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">            g.</span><span style="color:#B392F0">setGraph</span><span style="color:#E1E4E8">({ rankdir: dir, nodesep: </span><span style="color:#79B8FF">16</span><span style="color:#E1E4E8">, ranksep: </span><span style="color:#79B8FF">50</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">            g.</span><span style="color:#B392F0">setDefaultEdgeLabel</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({}));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">            graph.</span><span style="color:#B392F0">getNodes</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">forEach</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">node</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">                const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">width</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">height</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> node.</span><span style="color:#B392F0">getSize</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">                g.</span><span style="color:#B392F0">setNode</span><span style="color:#E1E4E8">(node.id, { width, height });</span></span>
<span class="line"><span style="color:#E1E4E8">            });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">            graph.</span><span style="color:#B392F0">getEdges</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">forEach</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">edge</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">                const</span><span style="color:#79B8FF"> sourceId</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> edge.</span><span style="color:#B392F0">getSourceCellId</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">                const</span><span style="color:#79B8FF"> targetId</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> edge.</span><span style="color:#B392F0">getTargetCellId</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">                g.</span><span style="color:#B392F0">setEdge</span><span style="color:#E1E4E8">(sourceId, targetId);</span></span>
<span class="line"><span style="color:#E1E4E8">            });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">            dagre.</span><span style="color:#B392F0">layout</span><span style="color:#E1E4E8">(g);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">            g.</span><span style="color:#B392F0">nodes</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">forEach</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">id</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">                const</span><span style="color:#79B8FF"> node</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph.</span><span style="color:#B392F0">getCellById</span><span style="color:#E1E4E8">(id) </span><span style="color:#F97583">as</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">                if</span><span style="color:#E1E4E8"> (node) {</span></span>
<span class="line"><span style="color:#F97583">                    const</span><span style="color:#79B8FF"> pos</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> g.</span><span style="color:#B392F0">node</span><span style="color:#E1E4E8">(id);</span></span>
<span class="line"><span style="color:#E1E4E8">                    node.</span><span style="color:#B392F0">position</span><span style="color:#E1E4E8">(pos.x, pos.y);</span></span>
<span class="line"><span style="color:#E1E4E8">                }</span></span>
<span class="line"><span style="color:#E1E4E8">            });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">            graph.</span><span style="color:#B392F0">getEdges</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">forEach</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">edge</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">                const</span><span style="color:#79B8FF"> source</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> edge.</span><span style="color:#B392F0">getSourceNode</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">                const</span><span style="color:#79B8FF"> target</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> edge.</span><span style="color:#B392F0">getTargetNode</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">                if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">source </span><span style="color:#F97583">||</span><span style="color:#F97583"> !</span><span style="color:#E1E4E8">target) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">                const</span><span style="color:#79B8FF"> sourceBBox</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> source.</span><span style="color:#B392F0">getBBox</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">                const</span><span style="color:#79B8FF"> targetBBox</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> target.</span><span style="color:#B392F0">getBBox</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">                if</span><span style="color:#E1E4E8"> ((dir </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> "LR"</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> dir </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> "RL"</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">&#x26;&#x26;</span><span style="color:#E1E4E8"> sourceBBox.y </span><span style="color:#F97583">!==</span><span style="color:#E1E4E8"> targetBBox.y) {</span></span>
<span class="line"><span style="color:#F97583">                    const</span><span style="color:#79B8FF"> gap</span><span style="color:#F97583"> =</span></span>
<span class="line"><span style="color:#E1E4E8">                        dir </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> "LR"</span></span>
<span class="line"><span style="color:#F97583">                            ?</span><span style="color:#E1E4E8"> targetBBox.x </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> sourceBBox.x </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> sourceBBox.width</span></span>
<span class="line"><span style="color:#F97583">                            :</span><span style="color:#F97583"> -</span><span style="color:#E1E4E8">sourceBBox.x </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> targetBBox.x </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> targetBBox.width;</span></span>
<span class="line"><span style="color:#F97583">                    const</span><span style="color:#79B8FF"> fix</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> dir </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> "LR"</span><span style="color:#F97583"> ?</span><span style="color:#E1E4E8"> sourceBBox.width </span><span style="color:#F97583">:</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">                    const</span><span style="color:#79B8FF"> x</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> sourceBBox.x </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> fix </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> gap </span><span style="color:#F97583">/</span><span style="color:#79B8FF"> 2</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">                    edge.</span><span style="color:#B392F0">setVertices</span><span style="color:#E1E4E8">([</span></span>
<span class="line"><span style="color:#E1E4E8">                        { x, y: sourceBBox.center.y },</span></span>
<span class="line"><span style="color:#E1E4E8">                        { x, y: targetBBox.center.y },</span></span>
<span class="line"><span style="color:#E1E4E8">                    ]);</span></span>
<span class="line"><span style="color:#E1E4E8">                } </span><span style="color:#F97583">else</span><span style="color:#F97583"> if</span><span style="color:#E1E4E8"> ((dir </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> "TB"</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> dir </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> "BT"</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">&#x26;&#x26;</span><span style="color:#E1E4E8"> sourceBBox.x </span><span style="color:#F97583">!==</span><span style="color:#E1E4E8"> targetBBox.x) {</span></span>
<span class="line"><span style="color:#F97583">                    const</span><span style="color:#79B8FF"> gap</span><span style="color:#F97583"> =</span></span>
<span class="line"><span style="color:#E1E4E8">                        dir </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> "TB"</span></span>
<span class="line"><span style="color:#F97583">                            ?</span><span style="color:#E1E4E8"> targetBBox.y </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> sourceBBox.y </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> sourceBBox.height</span></span>
<span class="line"><span style="color:#F97583">                            :</span><span style="color:#F97583"> -</span><span style="color:#E1E4E8">sourceBBox.y </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> targetBBox.y </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> targetBBox.height;</span></span>
<span class="line"><span style="color:#F97583">                    const</span><span style="color:#79B8FF"> fix</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> dir </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> "TB"</span><span style="color:#F97583"> ?</span><span style="color:#E1E4E8"> sourceBBox.height </span><span style="color:#F97583">:</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">                    const</span><span style="color:#79B8FF"> y</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> sourceBBox.y </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> fix </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> gap </span><span style="color:#F97583">/</span><span style="color:#79B8FF"> 2</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">                    edge.</span><span style="color:#B392F0">setVertices</span><span style="color:#E1E4E8">([</span></span>
<span class="line"><span style="color:#E1E4E8">                        { x: sourceBBox.center.x, y },</span></span>
<span class="line"><span style="color:#E1E4E8">                        { x: targetBBox.center.x, y },</span></span>
<span class="line"><span style="color:#E1E4E8">                    ]);</span></span>
<span class="line"><span style="color:#E1E4E8">                } </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">                    edge.</span><span style="color:#B392F0">setVertices</span><span style="color:#E1E4E8">([]);</span></span>
<span class="line"><span style="color:#E1E4E8">                }</span></span>
<span class="line"><span style="color:#E1E4E8">            });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">            //   graph.centerContent();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">        layoutGraph</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    }, [data])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#B392F0">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            {</span><span style="color:#6A737D">/* 各颜色节点代表不同状态 */</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#F97583">            &#x3C;</span><span style="color:#E1E4E8">div className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"flex flex-wrap gap-4 mb-4 ml-2"</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#E1E4E8">                {</span><span style="color:#FFAB70">Object</span><span style="color:#E1E4E8">.</span><span style="color:#FFAB70">entries</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">colorMap</span><span style="color:#E1E4E8">).</span><span style="color:#FFAB70">map</span><span style="color:#E1E4E8">(([key, { bgColor } ]:</span><span style="color:#FFAB70">any</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#F97583">                    &#x3C;</span><span style="color:#E1E4E8">div key</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{key} className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"flex items-center mr-4"</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">                        &#x3C;</span><span style="color:#E1E4E8">span className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"text-sm  mr-2 text-[#999999]"</span><span style="color:#F97583">></span><span style="color:#E1E4E8">{key}</span><span style="color:#F97583">&#x3C;/</span><span style="color:#E1E4E8">span</span><span style="color:#F97583">></span><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#B392F0">div</span></span>
<span class="line"><span style="color:#B392F0">                            className</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"w-6 h-3"</span></span>
<span class="line"><span style="color:#B392F0">                            style</span><span style="color:#E1E4E8">={{ </span><span style="color:#FFAB70">backgroundColor</span><span style="color:#F97583">:</span><span style="color:#B392F0"> bgColor</span><span style="color:#E1E4E8"> }}>&#x3C;/</span><span style="color:#B392F0">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                       </span></span>
<span class="line"><span style="color:#F97583">                    &#x3C;/</span><span style="color:#E1E4E8">div</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#E1E4E8">                ))}</span></span>
<span class="line"><span style="color:#F97583">            &#x3C;/</span><span style="color:#E1E4E8">div</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">            &#x3C;</span><span style="color:#E1E4E8">div className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"html-basic-app"</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">                &#x3C;</span><span style="color:#FFAB70">div</span></span>
<span class="line"><span style="color:#E1E4E8">                    className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"app-content"</span></span>
<span class="line"><span style="color:#E1E4E8">                    ref</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{containerRef}</span></span>
<span class="line"><span style="color:#E1E4E8">                    style</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{{ </span><span style="color:#B392F0">width</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"100%"</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">height</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"500px"</span><span style="color:#E1E4E8"> }}</span></span>
<span class="line"><span style="color:#F97583">                /></span></span>
<span class="line"><span style="color:#F97583">            &#x3C;/</span><span style="color:#E1E4E8">div</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">        &#x3C;/</span><span style="color:#E1E4E8">div</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#E1E4E8">    );</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#E1E4E8"> OrgChartGraph;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scss"><code><span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.html-basic-app</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">  display</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">flex</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  padding</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  font-family</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">sans-serif</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  .app-content</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    flex</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">    margin-right</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">8</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">    margin-left</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">8</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  .custom-html</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    width</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">100</span><span style="color:#F97583">%</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">    height</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">100</span><span style="color:#F97583">%</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    .content</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">      border-radius</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">5</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">      .labelBox</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">        color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">#FFF</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">        font-weight</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">bold</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">        font-size</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">12</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">        text-indent</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#F97583">em</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">        line-height</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">30</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">      .textBox</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">        background-color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">white</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">        width</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">100</span><span style="color:#F97583">%</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">        border-radius</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#79B8FF"> 0</span><span style="color:#79B8FF"> 5</span><span style="color:#F97583">px</span><span style="color:#79B8FF"> 5</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">        font-weight</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">500</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">        text-indent</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">10</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">        font-size</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">12</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">        line-height</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">30</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>演示效果</p>
<p><img src="http://img.blog.loli.wang/2025-03-13-zjdemo/01.png" alt="0"></p>
<h2 id="2-拖拽流程图">2. 拖拽流程图</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#E1E4E8"># core.tsx</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Graph, Shape } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@antv/x6'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Stencil } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@antv/x6-plugin-stencil'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Transform } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@antv/x6-plugin-transform'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Selection } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@antv/x6-plugin-selection'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Snapline } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@antv/x6-plugin-snapline'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Keyboard } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@antv/x6-plugin-keyboard'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Clipboard } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@antv/x6-plugin-clipboard'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { History } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@antv/x6-plugin-history'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { EventEmitter } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'events'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> let</span><span style="color:#E1E4E8"> graph</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Graph</span><span style="color:#F97583"> |</span><span style="color:#79B8FF"> null</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#79B8FF"> emitter</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#E1E4E8"> EventEmitter;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#B392F0"> initGraph</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">container</span><span style="color:#F97583">:</span><span style="color:#B392F0"> HTMLElement</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    graph </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Graph</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">        container,</span></span>
<span class="line"><span style="color:#E1E4E8">        grid: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        mousewheel: {</span></span>
<span class="line"><span style="color:#E1E4E8">            enabled: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            zoomAtMousePosition: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            modifiers: </span><span style="color:#9ECBFF">'ctrl'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            minScale: </span><span style="color:#79B8FF">0.5</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            maxScale: </span><span style="color:#79B8FF">3</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">        connecting: {</span></span>
<span class="line"><span style="color:#E1E4E8">            router: </span><span style="color:#9ECBFF">'manhattan'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            connector: {</span></span>
<span class="line"><span style="color:#E1E4E8">                name: </span><span style="color:#9ECBFF">'rounded'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                args: { radius: </span><span style="color:#79B8FF">8</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">            anchor: </span><span style="color:#9ECBFF">'center'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            connectionPoint: </span><span style="color:#9ECBFF">'anchor'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            allowBlank: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            snap: { radius: </span><span style="color:#79B8FF">20</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#B392F0">            createEdge</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">                return</span><span style="color:#F97583"> new</span><span style="color:#E1E4E8"> Shape.</span><span style="color:#B392F0">Edge</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">                    attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                        line: {</span></span>
<span class="line"><span style="color:#E1E4E8">                            stroke: </span><span style="color:#9ECBFF">'#A2B1C3'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                            strokeWidth: </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                            targetMarker: {</span></span>
<span class="line"><span style="color:#E1E4E8">                                name: </span><span style="color:#9ECBFF">'block'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                                width: </span><span style="color:#79B8FF">12</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                                height: </span><span style="color:#79B8FF">8</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                            },</span></span>
<span class="line"><span style="color:#E1E4E8">                        },</span></span>
<span class="line"><span style="color:#E1E4E8">                    },</span></span>
<span class="line"><span style="color:#E1E4E8">                    zIndex: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#B392F0">            validateConnection</span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70">targetMagnet</span><span style="color:#E1E4E8"> }) {</span></span>
<span class="line"><span style="color:#F97583">                return</span><span style="color:#F97583"> !!</span><span style="color:#E1E4E8">targetMagnet</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">        highlighting: {</span></span>
<span class="line"><span style="color:#E1E4E8">            magnetAdsorbed: {</span></span>
<span class="line"><span style="color:#E1E4E8">                name: </span><span style="color:#9ECBFF">'stroke'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                args: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                        fill: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        stroke: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    },</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // graph.on('node:click', () => {</span></span>
<span class="line"><span style="color:#6A737D">    //     alert("第一个点击触发")</span></span>
<span class="line"><span style="color:#6A737D">    // })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 使用插件</span></span>
<span class="line"><span style="color:#E1E4E8">    graph</span></span>
<span class="line"><span style="color:#E1E4E8">        .</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#F97583">            new</span><span style="color:#B392F0"> Transform</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">                resizing: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                rotating: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            }),</span></span>
<span class="line"><span style="color:#E1E4E8">        )</span></span>
<span class="line"><span style="color:#E1E4E8">        .</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#F97583">            new</span><span style="color:#B392F0"> Selection</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">                rubberband: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                showNodeSelectionBox: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            }),</span></span>
<span class="line"><span style="color:#E1E4E8">        )</span></span>
<span class="line"><span style="color:#E1E4E8">        .</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">new</span><span style="color:#B392F0"> Snapline</span><span style="color:#E1E4E8">())</span></span>
<span class="line"><span style="color:#E1E4E8">        .</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">new</span><span style="color:#B392F0"> Keyboard</span><span style="color:#E1E4E8">())</span></span>
<span class="line"><span style="color:#E1E4E8">        .</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">new</span><span style="color:#B392F0"> Clipboard</span><span style="color:#E1E4E8">())</span></span>
<span class="line"><span style="color:#E1E4E8">        .</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">new</span><span style="color:#B392F0"> History</span><span style="color:#E1E4E8">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 初始化 stencil</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> stencil</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Stencil</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">        title: </span><span style="color:#9ECBFF">'流程图'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        target: graph,</span></span>
<span class="line"><span style="color:#E1E4E8">        stencilGraphWidth: </span><span style="color:#79B8FF">200</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        stencilGraphHeight: </span><span style="color:#79B8FF">180</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        collapsable: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        groups: [</span></span>
<span class="line"><span style="color:#E1E4E8">            { title: </span><span style="color:#9ECBFF">'基础流程图'</span><span style="color:#E1E4E8">, name: </span><span style="color:#9ECBFF">'group1'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">            {</span></span>
<span class="line"><span style="color:#E1E4E8">                title: </span><span style="color:#9ECBFF">'系统设计图'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                name: </span><span style="color:#9ECBFF">'group2'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                graphHeight: </span><span style="color:#79B8FF">250</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                layoutOptions: { rowHeight: </span><span style="color:#79B8FF">70</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">        ],</span></span>
<span class="line"><span style="color:#E1E4E8">        layoutOptions: {</span></span>
<span class="line"><span style="color:#E1E4E8">            columns: </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            columnWidth: </span><span style="color:#79B8FF">80</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            rowHeight: </span><span style="color:#79B8FF">55</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#6A737D">    // 将 stencil 的容器挂载到对应 DOM 节点上</span></span>
<span class="line"><span style="color:#E1E4E8">    document.</span><span style="color:#B392F0">getElementById</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'stencil'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">appendChild</span><span style="color:#E1E4E8">(stencil.container)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    onNodeClick</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#6A737D">    // 快捷键绑定及事件</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">bindKey</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'meta+c'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'ctrl+c'</span><span style="color:#E1E4E8">], () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> cells</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">getSelectedCells</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (cells.</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">) graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">copy</span><span style="color:#E1E4E8">(cells)</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> false</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">bindKey</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'meta+x'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'ctrl+x'</span><span style="color:#E1E4E8">], () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> cells</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">getSelectedCells</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (cells.</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">) graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">cut</span><span style="color:#E1E4E8">(cells)</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> false</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">bindKey</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'meta+v'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'ctrl+v'</span><span style="color:#E1E4E8">], () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">isClipboardEmpty</span><span style="color:#E1E4E8">()) {</span></span>
<span class="line"><span style="color:#F97583">            const</span><span style="color:#79B8FF"> cells</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">paste</span><span style="color:#E1E4E8">({ offset: </span><span style="color:#79B8FF">32</span><span style="color:#E1E4E8"> })</span></span>
<span class="line"><span style="color:#E1E4E8">            graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">cleanSelection</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">            graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">select</span><span style="color:#E1E4E8">(cells)</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> false</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">bindKey</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'meta+z'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'ctrl+z'</span><span style="color:#E1E4E8">], () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">canUndo</span><span style="color:#E1E4E8">()) graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">undo</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> false</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">bindKey</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'meta+shift+z'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'ctrl+shift+z'</span><span style="color:#E1E4E8">], () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">canRedo</span><span style="color:#E1E4E8">()) graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">redo</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> false</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">bindKey</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'meta+a'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'ctrl+a'</span><span style="color:#E1E4E8">], () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> nodes</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">getNodes</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (nodes) graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">select</span><span style="color:#E1E4E8">(nodes)</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">bindKey</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'backspace'</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> cells</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">getSelectedCells</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (cells.</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">) graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">removeCells</span><span style="color:#E1E4E8">(cells)</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">bindKey</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'ctrl+1'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'meta+1'</span><span style="color:#E1E4E8">], () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> zoom</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">zoom</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (zoom </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 1.5</span><span style="color:#E1E4E8">) graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">zoom</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0.1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">bindKey</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'ctrl+2'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'meta+2'</span><span style="color:#E1E4E8">], () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> zoom</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">zoom</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (zoom </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 0.5</span><span style="color:#E1E4E8">) graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">zoom</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">-</span><span style="color:#79B8FF">0.1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 鼠标移入移出时显示/隐藏连接桩</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#B392F0"> showPorts</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">ports</span><span style="color:#F97583">:</span><span style="color:#B392F0"> NodeListOf</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">SVGElement</span><span style="color:#E1E4E8">>, </span><span style="color:#FFAB70">show</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> boolean</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">let</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">, len </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ports.</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">; i </span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8"> len; i </span><span style="color:#F97583">+=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">            ports[i].style.visibility </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> show </span><span style="color:#F97583">?</span><span style="color:#9ECBFF"> 'visible'</span><span style="color:#F97583"> :</span><span style="color:#9ECBFF"> 'hidden'</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'node:mouseenter'</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> container</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> document.</span><span style="color:#B392F0">getElementById</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'graph-container'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">!</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> ports</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> container.</span><span style="color:#B392F0">querySelectorAll</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'.x6-port-body'</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">as</span><span style="color:#B392F0"> NodeListOf</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">SVGElement</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#B392F0">        showPorts</span><span style="color:#E1E4E8">(ports, </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    graph.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'node:mouseleave'</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> container</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> document.</span><span style="color:#B392F0">getElementById</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'graph-container'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">!</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> ports</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> container.</span><span style="color:#B392F0">querySelectorAll</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'.x6-port-body'</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">as</span><span style="color:#B392F0"> NodeListOf</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">SVGElement</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#B392F0">        showPorts</span><span style="color:#E1E4E8">(ports, </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 定义连接桩及端口</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> ports</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">        groups: {</span></span>
<span class="line"><span style="color:#E1E4E8">            top: {</span></span>
<span class="line"><span style="color:#E1E4E8">                position: </span><span style="color:#9ECBFF">'top'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    circle: {</span></span>
<span class="line"><span style="color:#E1E4E8">                        r: </span><span style="color:#79B8FF">4</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        magnet: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        stroke: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        strokeWidth: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        fill: </span><span style="color:#9ECBFF">'#fff'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        style: { visibility: </span><span style="color:#9ECBFF">'hidden'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">                    },</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">            right: {</span></span>
<span class="line"><span style="color:#E1E4E8">                position: </span><span style="color:#9ECBFF">'right'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    circle: {</span></span>
<span class="line"><span style="color:#E1E4E8">                        r: </span><span style="color:#79B8FF">4</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        magnet: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        stroke: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        strokeWidth: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        fill: </span><span style="color:#9ECBFF">'#fff'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        style: { visibility: </span><span style="color:#9ECBFF">'hidden'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">                    },</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">            bottom: {</span></span>
<span class="line"><span style="color:#E1E4E8">                position: </span><span style="color:#9ECBFF">'bottom'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    circle: {</span></span>
<span class="line"><span style="color:#E1E4E8">                        r: </span><span style="color:#79B8FF">4</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        magnet: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        stroke: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        strokeWidth: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        fill: </span><span style="color:#9ECBFF">'#fff'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        style: { visibility: </span><span style="color:#9ECBFF">'hidden'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">                    },</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">            left: {</span></span>
<span class="line"><span style="color:#E1E4E8">                position: </span><span style="color:#9ECBFF">'left'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    circle: {</span></span>
<span class="line"><span style="color:#E1E4E8">                        r: </span><span style="color:#79B8FF">4</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        magnet: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        stroke: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        strokeWidth: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        fill: </span><span style="color:#9ECBFF">'#fff'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                        style: { visibility: </span><span style="color:#9ECBFF">'hidden'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">                    },</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">        items: [</span></span>
<span class="line"><span style="color:#E1E4E8">            { group: </span><span style="color:#9ECBFF">'top'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">            { group: </span><span style="color:#9ECBFF">'right'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">            { group: </span><span style="color:#9ECBFF">'bottom'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">            { group: </span><span style="color:#9ECBFF">'left'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">        ],</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 注册自定义节点</span></span>
<span class="line"><span style="color:#E1E4E8">    Graph.</span><span style="color:#B392F0">registerNode</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">        'custom-rect'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            inherit: </span><span style="color:#9ECBFF">'rect'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            width: </span><span style="color:#79B8FF">66</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            height: </span><span style="color:#79B8FF">36</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                body: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    strokeWidth: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    stroke: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    fill: </span><span style="color:#9ECBFF">'#EFF4FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">                text: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    fontSize: </span><span style="color:#79B8FF">12</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    fill: </span><span style="color:#9ECBFF">'#262626'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">            ports: { </span><span style="color:#F97583">...</span><span style="color:#E1E4E8">ports },</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#79B8FF">        true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    Graph.</span><span style="color:#B392F0">registerNode</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">        'custom-polygon'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            inherit: </span><span style="color:#9ECBFF">'polygon'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            width: </span><span style="color:#79B8FF">66</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            height: </span><span style="color:#79B8FF">36</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                body: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    strokeWidth: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    stroke: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    fill: </span><span style="color:#9ECBFF">'#EFF4FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">                text: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    fontSize: </span><span style="color:#79B8FF">12</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    fill: </span><span style="color:#9ECBFF">'#262626'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">            ports: {</span></span>
<span class="line"><span style="color:#F97583">                ...</span><span style="color:#E1E4E8">ports,</span></span>
<span class="line"><span style="color:#E1E4E8">                items: [{ group: </span><span style="color:#9ECBFF">'top'</span><span style="color:#E1E4E8"> }, { group: </span><span style="color:#9ECBFF">'bottom'</span><span style="color:#E1E4E8"> }],</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#79B8FF">        true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    Graph.</span><span style="color:#B392F0">registerNode</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">        'custom-circle'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            inherit: </span><span style="color:#9ECBFF">'circle'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            width: </span><span style="color:#79B8FF">45</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            height: </span><span style="color:#79B8FF">45</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                body: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    strokeWidth: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    stroke: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    fill: </span><span style="color:#9ECBFF">'#EFF4FF'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">                text: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    fontSize: </span><span style="color:#79B8FF">12</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    fill: </span><span style="color:#9ECBFF">'#262626'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">            ports: { </span><span style="color:#F97583">...</span><span style="color:#E1E4E8">ports },</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#79B8FF">        true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    Graph.</span><span style="color:#B392F0">registerNode</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">        'custom-image'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            inherit: </span><span style="color:#9ECBFF">'rect'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            width: </span><span style="color:#79B8FF">52</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            height: </span><span style="color:#79B8FF">52</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            markup: [</span></span>
<span class="line"><span style="color:#E1E4E8">                { tagName: </span><span style="color:#9ECBFF">'rect'</span><span style="color:#E1E4E8">, selector: </span><span style="color:#9ECBFF">'body'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">                { tagName: </span><span style="color:#9ECBFF">'image'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">                { tagName: </span><span style="color:#9ECBFF">'text'</span><span style="color:#E1E4E8">, selector: </span><span style="color:#9ECBFF">'label'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">            ],</span></span>
<span class="line"><span style="color:#E1E4E8">            attrs: {</span></span>
<span class="line"><span style="color:#E1E4E8">                body: { stroke: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8">, fill: </span><span style="color:#9ECBFF">'#5F95FF'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">                image: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    width: </span><span style="color:#79B8FF">26</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    height: </span><span style="color:#79B8FF">26</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    refX: </span><span style="color:#79B8FF">13</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    refY: </span><span style="color:#79B8FF">16</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">                label: {</span></span>
<span class="line"><span style="color:#E1E4E8">                    refX: </span><span style="color:#79B8FF">3</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    refY: </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    textAnchor: </span><span style="color:#9ECBFF">'left'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    textVerticalAnchor: </span><span style="color:#9ECBFF">'top'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    fontSize: </span><span style="color:#79B8FF">12</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                    fill: </span><span style="color:#9ECBFF">'#fff'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">                },</span></span>
<span class="line"><span style="color:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#E1E4E8">            ports: { </span><span style="color:#F97583">...</span><span style="color:#E1E4E8">ports },</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#79B8FF">        true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 创建 stencil 节点（基础流程图）</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> r1</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph.</span><span style="color:#B392F0">createNode</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">        shape: </span><span style="color:#9ECBFF">'custom-rect'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        label: </span><span style="color:#9ECBFF">'开始'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        attrs: { body: { rx: </span><span style="color:#79B8FF">20</span><span style="color:#E1E4E8">, ry: </span><span style="color:#79B8FF">26</span><span style="color:#E1E4E8"> } },</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> r2</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph.</span><span style="color:#B392F0">createNode</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">        shape: </span><span style="color:#9ECBFF">'custom-rect'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        label: </span><span style="color:#9ECBFF">'过程'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> r3</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph.</span><span style="color:#B392F0">createNode</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">        shape: </span><span style="color:#9ECBFF">'custom-rect'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        label: </span><span style="color:#9ECBFF">'可选过程'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        attrs: { body: { rx: </span><span style="color:#79B8FF">6</span><span style="color:#E1E4E8">, ry: </span><span style="color:#79B8FF">6</span><span style="color:#E1E4E8"> } },</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> r4</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph.</span><span style="color:#B392F0">createNode</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">        shape: </span><span style="color:#9ECBFF">'custom-polygon'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        label: </span><span style="color:#9ECBFF">'决策'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        attrs: { body: { refPoints: </span><span style="color:#9ECBFF">'0,10 10,0 20,10 10,20'</span><span style="color:#E1E4E8"> } },</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> r5</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph.</span><span style="color:#B392F0">createNode</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">        shape: </span><span style="color:#9ECBFF">'custom-polygon'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        label: </span><span style="color:#9ECBFF">'数据'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        attrs: { body: { refPoints: </span><span style="color:#9ECBFF">'10,0 40,0 30,20 0,20'</span><span style="color:#E1E4E8"> } },</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> r6</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> graph.</span><span style="color:#B392F0">createNode</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">        shape: </span><span style="color:#9ECBFF">'custom-circle'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        label: </span><span style="color:#9ECBFF">'连接'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    stencil.</span><span style="color:#B392F0">load</span><span style="color:#E1E4E8">([r1, r2, r3, r4, r5, r6], </span><span style="color:#9ECBFF">'group1'</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 创建 stencil 图标节点（系统设计图）</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> imageShapes</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            label: </span><span style="color:#9ECBFF">'Client'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            image: </span><span style="color:#9ECBFF">'https://gw.alipayobjects.com/zos/bmw-prod/687b6cb9-4b97-42a6-96d0-34b3099133ac.svg'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            label: </span><span style="color:#9ECBFF">'Http'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            image: </span><span style="color:#9ECBFF">'https://gw.alipayobjects.com/zos/bmw-prod/dc1ced06-417d-466f-927b-b4a4d3265791.svg'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            label: </span><span style="color:#9ECBFF">'Api'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            image: </span><span style="color:#9ECBFF">'https://gw.alipayobjects.com/zos/bmw-prod/c55d7ae1-8d20-4585-bd8f-ca23653a4489.svg'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            label: </span><span style="color:#9ECBFF">'Sql'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            image: </span><span style="color:#9ECBFF">'https://gw.alipayobjects.com/zos/bmw-prod/6eb71764-18ed-4149-b868-53ad1542c405.svg'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            label: </span><span style="color:#9ECBFF">'Clound'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            image: </span><span style="color:#9ECBFF">'https://gw.alipayobjects.com/zos/bmw-prod/c36fe7cb-dc24-4854-aeb5-88d8dc36d52e.svg'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">        {</span></span>
<span class="line"><span style="color:#E1E4E8">            label: </span><span style="color:#9ECBFF">'Mq'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            image: </span><span style="color:#9ECBFF">'https://gw.alipayobjects.com/zos/bmw-prod/2010ac9f-40e7-49d4-8c4a-4fcf2f83033b.svg'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">    ]</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> imageNodes</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> imageShapes.</span><span style="color:#B392F0">map</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">item</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#E1E4E8">        graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">createNode</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">            shape: </span><span style="color:#9ECBFF">'custom-image'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            label: item.label,</span></span>
<span class="line"><span style="color:#E1E4E8">            attrs: { image: { </span><span style="color:#9ECBFF">'xlink:href'</span><span style="color:#E1E4E8">: item.image } },</span></span>
<span class="line"><span style="color:#E1E4E8">        }),</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"><span style="color:#E1E4E8">    stencil.</span><span style="color:#B392F0">load</span><span style="color:#E1E4E8">(imageNodes, </span><span style="color:#9ECBFF">'group2'</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#B392F0"> onNodeClick</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'node:click'</span><span style="color:#E1E4E8">, ({ </span><span style="color:#FFAB70">node</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">        // 通知流程展开</span></span>
<span class="line"><span style="color:#E1E4E8">        emitter.</span><span style="color:#B392F0">emit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'flowDrawerShow'</span><span style="color:#E1E4E8">,node);</span></span>
<span class="line"><span style="color:#E1E4E8">        console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(graph</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">toJSON</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#E1E4E8"># index.tsx</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> React, { createContext, useEffect } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'react'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> FlowWithDrawer </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@/components/FlowWithDrawer'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { initGraph } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@/core/graph'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> FlowTools</span><span style="color:#F97583">:</span><span style="color:#B392F0"> React</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">FC</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  useEffect</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">    initGraph</span><span style="color:#E1E4E8">(document.</span><span style="color:#B392F0">getElementById</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'graph-container'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">  }, [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> id</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"container"</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"flex h-screen"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">          &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> id</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"stencil"</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"w-[200px] border-r border-gray-300 overflow-auto"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">          &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> id</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"graph-container"</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"flex-1 relative"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#79B8FF">FlowWithDrawer</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  )</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#E1E4E8"> FlowTools</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scss"><code><span class="line"><span style="color:#E1E4E8"># tailwind</span><span style="color:#B392F0">.css</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">@tailwind base;</span></span>
<span class="line"><span style="color:#E1E4E8">@tailwind components;</span></span>
<span class="line"><span style="color:#E1E4E8">@tailwind utilities;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">#container</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    display</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">flex</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">    border</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#F97583">px</span><span style="color:#79B8FF"> solid</span><span style="color:#79B8FF"> #dfe3e8</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">#stencil</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    width</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">180</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">    height</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">100</span><span style="color:#F97583">%</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">    position</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">relative</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">    border-right</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#F97583">px</span><span style="color:#79B8FF"> solid</span><span style="color:#79B8FF"> #dfe3e8</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">#graph-container</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    width</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">calc</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">100</span><span style="color:#F97583">%</span><span style="color:#F97583"> -</span><span style="color:#79B8FF"> 180</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#79B8FF">    height</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">100</span><span style="color:#F97583">%</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.x6-widget-stencil</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    background-color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">#fff</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.x6-widget-stencil-title</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    background-color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">#fff</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.x6-widget-stencil-group-title</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    background-color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">#fff</span><span style="color:#F97583"> !important</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.x6-widget-transform</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    margin</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">-1</span><span style="color:#F97583">px</span><span style="color:#79B8FF"> 0</span><span style="color:#79B8FF"> 0</span><span style="color:#79B8FF"> -1</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">    padding</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">    border</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#F97583">px</span><span style="color:#79B8FF"> solid</span><span style="color:#79B8FF"> #239edd</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.x6-widget-transform</span><span style="color:#E1E4E8">></span><span style="color:#85E89D">div</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    border</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#F97583">px</span><span style="color:#79B8FF"> solid</span><span style="color:#79B8FF"> #239edd</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.x6-widget-transform</span><span style="color:#E1E4E8">></span><span style="color:#85E89D">div</span><span style="color:#B392F0">:hover</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    background-color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">#3dafe4</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.x6-widget-transform-active-handle</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    background-color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">#3dafe4</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.x6-widget-transform-resize</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    border-radius</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.x6-widget-selection-inner</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    border</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#F97583">px</span><span style="color:#79B8FF"> solid</span><span style="color:#79B8FF"> #239edd</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">.x6-widget-selection-box</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    opacity</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p><img src="http://img.blog.loli.wang/2025-03-13-zjdemo/02.png" alt="0">
<img src="http://img.blog.loli.wang/2025-03-13-zjdemo/03.png" alt="0"></p>
<h2 id="3-bpmn-图表">3. bpmn 图表</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#E1E4E8"># core.ts</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> BpmnJS </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'bpmn-js/lib/Modeler'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> test </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@/xml/test.bpmn'</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> let</span><span style="color:#E1E4E8"> modeler</span><span style="color:#F97583">:</span><span style="color:#B392F0">BpmnJS</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#B392F0"> initBpmn</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">container</span><span style="color:#F97583">:</span><span style="color:#B392F0"> HTMLElement</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (modeler) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#6A737D">    // 创建 BpmnJS 实例</span></span>
<span class="line"><span style="color:#E1E4E8">    modeler </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> BpmnJS</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">        container</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    modeler.</span><span style="color:#B392F0">importXML</span><span style="color:#E1E4E8">(test)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#E1E4E8"># index.tsx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> React, { useEffect, useRef } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "react"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { initBpmn } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "@/core/core"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "bpmn-js/dist/assets/diagram-js.css"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "bpmn-js/dist/assets/bpmn-font/css/bpmn.css"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> BpmnTools</span><span style="color:#F97583">:</span><span style="color:#B392F0"> React</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">FC</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  useEffect</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">      initBpmn</span><span style="color:#E1E4E8">(document.</span><span style="color:#B392F0">getElementById</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"bpmnCanvas"</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"app"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">div</span></span>
<span class="line"><span style="color:#B392F0">        id</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"bpmnCanvas"</span></span>
<span class="line"><span style="color:#B392F0">        className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"bpmn-viewer"</span></span>
<span class="line"><span style="color:#B392F0">        style</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{{ width: </span><span style="color:#9ECBFF">"100%"</span><span style="color:#E1E4E8">, height: </span><span style="color:#9ECBFF">"100vh"</span><span style="color:#E1E4E8"> }}</span></span>
<span class="line"><span style="color:#E1E4E8">      /></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#E1E4E8"> BpmnTools;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8"># test.bpmn</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;?</span><span style="color:#85E89D">xml</span><span style="color:#B392F0"> version</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"1.0"</span><span style="color:#B392F0"> encoding</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8">?></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">definitions</span><span style="color:#B392F0"> xmlns</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.omg.org/spec/BPMN/20100524/MODEL"</span><span style="color:#B392F0"> xmlns:xsi</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.w3.org/2001/XMLSchema-instance"</span><span style="color:#B392F0"> xmlns:xsd</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.w3.org/2001/XMLSchema"</span><span style="color:#B392F0"> xmlns:flowable</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://flowable.org/bpmn"</span><span style="color:#B392F0"> xmlns:bpmndi</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.omg.org/spec/BPMN/20100524/DI"</span><span style="color:#B392F0"> xmlns:omgdc</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.omg.org/spec/DD/20100524/DC"</span><span style="color:#B392F0"> xmlns:omgdi</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.omg.org/spec/DD/20100524/DI"</span><span style="color:#B392F0"> typeLanguage</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.w3.org/2001/XMLSchema"</span><span style="color:#B392F0"> expressionLanguage</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.w3.org/1999/XPath"</span><span style="color:#B392F0"> targetNamespace</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.flowable.org/processdef"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">process</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"self_support_order_sales"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"self_support_order_sales"</span><span style="color:#B392F0"> isExecutable</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">documentation</span><span style="color:#E1E4E8">>self_support_order_sales&#x3C;/</span><span style="color:#85E89D">documentation</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">startEvent</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"startEvent1"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"开始"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">startEvent</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">userTask</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-2C6198F8-7872-416A-A5D7-520922753E6F"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"客户订单待接收"</span><span style="color:#B392F0"> flowable:assignee</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${task_user}"</span><span style="color:#B392F0"> xmlns:buttonparam</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://buttonparam.com.cn"</span><span style="color:#B392F0"> buttonparam:buttonparam</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"[{</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">id</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:5,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">name</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Reject</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">alias</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Reject</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">cssname</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#79B8FF"> &#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">type</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">1</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">createTime</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">2021-03-16 12:04:38</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">updateTime</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">2021-08-24 09:44:57</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">$$hashKey</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">object:1312</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">},{</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">id</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:13,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">name</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Confirm</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">alias</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Confirm</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">cssname</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">primary</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">type</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">1</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">createTime</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">2021-03-17 16:39:09</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">updateTime</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">2021-08-24 09:45:45</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">$$hashKey</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">object:1315</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">}]"</span><span style="color:#B392F0"> xmlns:nodetype</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://nodetype.com.cn"</span><span style="color:#B392F0"> nodetype:nodetype</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">""</span><span style="color:#B392F0"> xmlns:mail_param</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://mailparam.com.cn"</span><span style="color:#B392F0"> mail_param:mail_param</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">&#x26;quot;&#x26;quot;</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">extensionElements</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">modeler:initiator-can-complete</span><span style="color:#B392F0"> xmlns:modeler</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://flowable.org/modeler"</span><span style="color:#E1E4E8">></span><span style="color:#9ECBFF">&#x3C;![CDATA[false]]></span><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">modeler:initiator-can-complete</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">extensionElements</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">userTask</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-1EB675F0-8B1F-42E3-B105-AFD704C4F6B9"</span><span style="color:#B392F0"> sourceRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"startEvent1"</span><span style="color:#B392F0"> targetRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-2C6198F8-7872-416A-A5D7-520922753E6F"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">userTask</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-43EB1A4D-AB9D-4E8E-954B-44B48738DE7C"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"客户订单已驳回"</span><span style="color:#B392F0"> flowable:assignee</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${task_user}"</span><span style="color:#B392F0"> xmlns:buttonparam</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://buttonparam.com.cn"</span><span style="color:#B392F0"> buttonparam:buttonparam</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">&#x26;quot;&#x26;quot;</span><span style="color:#9ECBFF">"</span><span style="color:#B392F0"> xmlns:nodetype</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://nodetype.com.cn"</span><span style="color:#B392F0"> nodetype:nodetype</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">""</span><span style="color:#B392F0"> xmlns:mail_param</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://mailparam.com.cn"</span><span style="color:#B392F0"> mail_param:mail_param</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">&#x26;quot;&#x26;quot;</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">extensionElements</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">modeler:initiator-can-complete</span><span style="color:#B392F0"> xmlns:modeler</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://flowable.org/modeler"</span><span style="color:#E1E4E8">></span><span style="color:#9ECBFF">&#x3C;![CDATA[false]]></span><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">modeler:initiator-can-complete</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">extensionElements</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">userTask</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">userTask</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-E0B61951-18D7-4CA5-B340-FE9A4CD4E9F0"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"销售订单待确认"</span><span style="color:#B392F0"> flowable:assignee</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${task_user}"</span><span style="color:#B392F0"> xmlns:buttonparam</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://buttonparam.com.cn"</span><span style="color:#B392F0"> buttonparam:buttonparam</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"[{</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">id</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:5,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">name</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Reject</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">alias</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Reject</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">cssname</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#79B8FF"> &#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">type</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">1</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">createTime</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">2021-03-16 12:04:38</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">updateTime</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">2021-08-24 09:44:57</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">$$hashKey</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">object:2155</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">},{</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">id</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:13,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">name</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Confirm</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">alias</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Confirm</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">cssname</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">primary</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">type</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">1</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">createTime</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">2021-03-17 16:39:09</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">updateTime</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">2021-08-24 09:45:45</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">$$hashKey</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">object:2158</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">}]"</span><span style="color:#B392F0"> xmlns:nodetype</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://nodetype.com.cn"</span><span style="color:#B392F0"> nodetype:nodetype</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"{</span></span>
<span class="line"><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">nodeType</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Confirm_start</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span></span>
<span class="line"><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">signal</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">update_product</span><span style="color:#79B8FF">&#x26;quot;</span></span>
<span class="line"><span style="color:#9ECBFF">}"</span><span style="color:#B392F0"> xmlns:mail_param</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://mailparam.com.cn"</span><span style="color:#B392F0"> mail_param:mail_param</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">&#x26;quot;&#x26;quot;</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">extensionElements</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">modeler:initiator-can-complete</span><span style="color:#B392F0"> xmlns:modeler</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://flowable.org/modeler"</span><span style="color:#E1E4E8">></span><span style="color:#9ECBFF">&#x3C;![CDATA[false]]></span><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">modeler:initiator-can-complete</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">extensionElements</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">userTask</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">userTask</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-34D7D478-B1FE-42A8-BBB1-FDC6BA6BD169"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"销售订单已确认"</span><span style="color:#B392F0"> flowable:assignee</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${task_user}"</span><span style="color:#B392F0"> xmlns:buttonparam</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://buttonparam.com.cn"</span><span style="color:#B392F0"> buttonparam:buttonparam</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">&#x26;quot;&#x26;quot;</span><span style="color:#9ECBFF">"</span><span style="color:#B392F0"> xmlns:nodetype</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://nodetype.com.cn"</span><span style="color:#B392F0"> nodetype:nodetype</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">""</span><span style="color:#B392F0"> xmlns:mail_param</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://mailparam.com.cn"</span><span style="color:#B392F0"> mail_param:mail_param</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">&#x26;quot;&#x26;quot;</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">extensionElements</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">modeler:initiator-can-complete</span><span style="color:#B392F0"> xmlns:modeler</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://flowable.org/modeler"</span><span style="color:#E1E4E8">></span><span style="color:#9ECBFF">&#x3C;![CDATA[false]]></span><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">modeler:initiator-can-complete</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">extensionElements</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">userTask</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">endEvent</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-B45763A0-0E5F-41EF-B89F-54B52324D694"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">endEvent</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-39048C6C-4266-45C4-96C7-D1C030542352"</span><span style="color:#B392F0"> sourceRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-34D7D478-B1FE-42A8-BBB1-FDC6BA6BD169"</span><span style="color:#B392F0"> targetRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-B45763A0-0E5F-41EF-B89F-54B52324D694"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">userTask</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-DAF4B04E-6EF3-4AEB-B033-447CEA228874"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"销售订单已驳回"</span><span style="color:#B392F0"> flowable:assignee</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${task_user}"</span><span style="color:#B392F0"> xmlns:buttonparam</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://buttonparam.com.cn"</span><span style="color:#B392F0"> buttonparam:buttonparam</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"[{</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">id</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:5,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">name</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Reject</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">alias</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">Reject</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">cssname</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#79B8FF"> &#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">type</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">1</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">createTime</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">2021-03-16 12:04:38</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">updateTime</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">2021-08-24 09:44:57</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">,</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">$$hashKey</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">:</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">object:2988</span><span style="color:#79B8FF">&#x26;quot;</span><span style="color:#9ECBFF">}]"</span><span style="color:#B392F0"> xmlns:nodetype</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://nodetype.com.cn"</span><span style="color:#B392F0"> nodetype:nodetype</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">""</span><span style="color:#B392F0"> xmlns:mail_param</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://mailparam.com.cn"</span><span style="color:#B392F0"> mail_param:mail_param</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">&#x26;quot;&#x26;quot;</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">extensionElements</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">modeler:initiator-can-complete</span><span style="color:#B392F0"> xmlns:modeler</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://flowable.org/modeler"</span><span style="color:#E1E4E8">></span><span style="color:#9ECBFF">&#x3C;![CDATA[false]]></span><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">modeler:initiator-can-complete</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">extensionElements</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">userTask</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-1EE913E4-CCAB-439D-BE26-338D4530DFC3"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"驳回(同步客户S/O)"</span><span style="color:#B392F0"> sourceRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-DAF4B04E-6EF3-4AEB-B033-447CEA228874"</span><span style="color:#B392F0"> targetRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-43EB1A4D-AB9D-4E8E-954B-44B48738DE7C"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">conditionExpression</span><span style="color:#B392F0"> xsi:type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tFormalExpression"</span><span style="color:#E1E4E8">></span><span style="color:#9ECBFF">&#x3C;![CDATA[${Reject}]]></span><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">conditionExpression</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-8CD85261-F4E8-438F-928C-6E891027584D"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"驳回"</span><span style="color:#B392F0"> sourceRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-E0B61951-18D7-4CA5-B340-FE9A4CD4E9F0"</span><span style="color:#B392F0"> targetRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-DAF4B04E-6EF3-4AEB-B033-447CEA228874"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">conditionExpression</span><span style="color:#B392F0"> xsi:type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tFormalExpression"</span><span style="color:#E1E4E8">></span><span style="color:#9ECBFF">&#x3C;![CDATA[${Reject}]]></span><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">conditionExpression</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-BDCCAE12-E4C3-482E-9065-9BF43459CC15"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"确认(触发orderP/O新建)"</span><span style="color:#B392F0"> sourceRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-E0B61951-18D7-4CA5-B340-FE9A4CD4E9F0"</span><span style="color:#B392F0"> targetRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-34D7D478-B1FE-42A8-BBB1-FDC6BA6BD169"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">conditionExpression</span><span style="color:#B392F0"> xsi:type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tFormalExpression"</span><span style="color:#E1E4E8">></span><span style="color:#9ECBFF">&#x3C;![CDATA[${Confirm}]]></span><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">conditionExpression</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-7040954B-1B18-450D-A42F-1EA77654A9CF"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"确认"</span><span style="color:#B392F0"> sourceRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-2C6198F8-7872-416A-A5D7-520922753E6F"</span><span style="color:#B392F0"> targetRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-E0B61951-18D7-4CA5-B340-FE9A4CD4E9F0"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">conditionExpression</span><span style="color:#B392F0"> xsi:type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tFormalExpression"</span><span style="color:#E1E4E8">></span><span style="color:#9ECBFF">&#x3C;![CDATA[${Confirm}]]></span><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">conditionExpression</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-262A809B-A151-4D1B-B8A7-3F23FCBFA358"</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"驳回（同步客户P/O）"</span><span style="color:#B392F0"> sourceRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-2C6198F8-7872-416A-A5D7-520922753E6F"</span><span style="color:#B392F0"> targetRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-43EB1A4D-AB9D-4E8E-954B-44B48738DE7C"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">conditionExpression</span><span style="color:#B392F0"> xsi:type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tFormalExpression"</span><span style="color:#E1E4E8">></span><span style="color:#9ECBFF">&#x3C;![CDATA[${Reject}]]></span><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">conditionExpression</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-B904D61F-C5CF-41AB-A348-3B665ABC8A12"</span><span style="color:#B392F0"> sourceRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-43EB1A4D-AB9D-4E8E-954B-44B48738DE7C"</span><span style="color:#B392F0"> targetRef</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-B45763A0-0E5F-41EF-B89F-54B52324D694"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">sequenceFlow</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">process</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNDiagram</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNDiagram_self_support_order_sales"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNPlane</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"self_support_order_sales"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNPlane_self_support_order_sales"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"startEvent1"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNShape_startEvent1"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#B392F0"> height</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"30.0"</span><span style="color:#B392F0"> width</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"30.0"</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"570.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"30.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-2C6198F8-7872-416A-A5D7-520922753E6F"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNShape_sid-2C6198F8-7872-416A-A5D7-520922753E6F"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#B392F0"> height</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"80.0"</span><span style="color:#B392F0"> width</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"100.0"</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"535.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"186.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-43EB1A4D-AB9D-4E8E-954B-44B48738DE7C"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNShape_sid-43EB1A4D-AB9D-4E8E-954B-44B48738DE7C"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#B392F0"> height</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"80.0"</span><span style="color:#B392F0"> width</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"100.0"</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"825.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"186.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-E0B61951-18D7-4CA5-B340-FE9A4CD4E9F0"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNShape_sid-E0B61951-18D7-4CA5-B340-FE9A4CD4E9F0"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#B392F0"> height</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"80.0"</span><span style="color:#B392F0"> width</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"100.0"</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"535.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"405.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-34D7D478-B1FE-42A8-BBB1-FDC6BA6BD169"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNShape_sid-34D7D478-B1FE-42A8-BBB1-FDC6BA6BD169"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#B392F0"> height</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"80.0"</span><span style="color:#B392F0"> width</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"100.0"</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"535.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"660.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-B45763A0-0E5F-41EF-B89F-54B52324D694"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNShape_sid-B45763A0-0E5F-41EF-B89F-54B52324D694"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#B392F0"> height</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"28.0"</span><span style="color:#B392F0"> width</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"28.0"</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"571.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"840.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-DAF4B04E-6EF3-4AEB-B033-447CEA228874"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNShape_sid-DAF4B04E-6EF3-4AEB-B033-447CEA228874"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#B392F0"> height</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"80.0"</span><span style="color:#B392F0"> width</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"100.0"</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"750.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"405.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdc:Bounds</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNShape</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-BDCCAE12-E4C3-482E-9065-9BF43459CC15"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNEdge_sid-BDCCAE12-E4C3-482E-9065-9BF43459CC15"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"585.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"484.95000000000005"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"585.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"660.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-8CD85261-F4E8-438F-928C-6E891027584D"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNEdge_sid-8CD85261-F4E8-438F-928C-6E891027584D"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"634.9499999999999"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"445.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"750.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"445.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-1EE913E4-CCAB-439D-BE26-338D4530DFC3"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNEdge_sid-1EE913E4-CCAB-439D-BE26-338D4530DFC3"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"800.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"405.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"800.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"247.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"824.9999999999998"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"246.03653846153847"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-B904D61F-C5CF-41AB-A348-3B665ABC8A12"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNEdge_sid-B904D61F-C5CF-41AB-A348-3B665ABC8A12"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"875.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"265.95000000000005"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"875.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"854.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"598.9499200108609"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"854.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-262A809B-A151-4D1B-B8A7-3F23FCBFA358"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNEdge_sid-262A809B-A151-4D1B-B8A7-3F23FCBFA358"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"634.9499999999999"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"226.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"824.9999999999804"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"226.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-1EB675F0-8B1F-42E3-B105-AFD704C4F6B9"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNEdge_sid-1EB675F0-8B1F-42E3-B105-AFD704C4F6B9"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"585.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"59.94999944212711"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"585.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"186.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-7040954B-1B18-450D-A42F-1EA77654A9CF"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNEdge_sid-7040954B-1B18-450D-A42F-1EA77654A9CF"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"585.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"265.95000000000005"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"585.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"405.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#B392F0"> bpmnElement</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sid-39048C6C-4266-45C4-96C7-D1C030542352"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"BPMNEdge_sid-39048C6C-4266-45C4-96C7-D1C030542352"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"585.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"739.9499999999999"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#B392F0"> x</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"585.0"</span><span style="color:#B392F0"> y</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"840.0"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">omgdi:waypoint</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNEdge</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNPlane</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">bpmndi:BPMNDiagram</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">definitions</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span></code></pre>
<p>记录下。。。。</p>
<p><img src="http://img.blog.loli.wang/2025-03-13-zjdemo/04.png" alt="0"></p>  </div> <div class="tag-container"> <a href="/tags/前端进阶" class="tag" title="前端进阶"> 前端进阶 </a><a href="/tags/操作" class="tag" title="操作"> 操作 </a> </div> </div>   </div> </div> </div>  </body></html> 